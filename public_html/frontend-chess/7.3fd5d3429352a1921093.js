(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{HaiW:function(l,n,t){"use strict";t.r(n);var u=t("CcnG"),e=function(){return function(){}}(),i=t("pMnS"),r=t("Ip0R"),o=function(){function l(l,n){void 0===l&&(l=""),this.symbol=l,void 0===n?this.getPiece(l):this.getPiece(l,n)}return l.prototype.getPiece=function(l,n){var t="",u="";""!==l?(u=l.toUpperCase()==l?"white":"black",void 0!==n&&(u=n),t={r:"rook",n:"knight",b:"bishop",q:"queen",k:"king",p:"pawn"}[l.toLowerCase()],this.set(t,u)):(this.name="",this.color="",this.image="")},l.prototype.get_max_count=function(){return this.max_count},l.prototype.get_symbol=function(){var l={rook:"r",knight:"n",bishop:"b",queen:"q",king:"k",pawn:"p","":"empty"}[this.name];return"white"==this.color?l.toUpperCase():l},l.prototype.get_color=function(){return this.color},l.prototype.set=function(l,n){this.name=l,this.color=n,this.max_count={rook:10,knight:10,bishop:10,queen:9,king:1,pawn:8}[this.name],this.numerical_value={rook:5,knight:3,bishop:3,queen:9,king:1e3,pawn:1}[this.name],this.refresh()},l.prototype.setColor=function(l){this.color=l,this.refresh()},l.prototype.refresh=function(){this.image=""!==this.name?this.color+" fas fa-chess-"+this.name:""},l}(),s=function(){function l(l,n){this.position=[],this.game_time=0,this.captured_by_white=[],this.captured_by_black=[],this.white_side=!0,this.piecesPromote=[new o("r"),new o("n"),new o("b"),new o("q")],this.buildingPieces=[[new o("r","white"),new o("n","white"),new o("b","white"),new o("q","white"),new o("k","white"),new o("p","white")],[new o("r","black"),new o("n","black"),new o("b","black"),new o("q","black"),new o("k","black"),new o("p","black")]],this.newPosition(l),this.game_time=void 0===n?300:60*n}return l.prototype.rotate_board=function(){this.white_side=!this.white_side,this.drawBoard()},l.prototype.newPosition=function(l){this.position=[];for(var n=l.split("/"),t=0;t<n.length;t++){for(var u=[],e=0;e<n[t].length;e++){var i=n[t][e];if(this.is_numeric(i))for(var r=0;r<parseInt(i);r++)u.push("");else u.push(i)}this.position.push(u)}this.drawBoard()},l.prototype.is_numeric=function(l){return/^\d+$/.test(l)},l.prototype.get_fen=function(){var l="";return this.position.forEach(function(n){var t=0;n.forEach(function(n){""==n?t++:(t>0&&(l+=t.toString(),t=0),l+=n)}),t>0&&(l+=t.toString()),l+="/"}),l.substring(0,l.length-1)},l.prototype.drawBoard=function(){var l=this;this.pieces=[],this.captured_by_black=[],this.captured_by_white=[];for(var n={r:2,n:2,b:2,q:1,p:8,R:2,N:2,B:2,Q:1,P:8,K:1,k:1},t={r:0,n:0,b:0,q:0,p:0,R:0,N:0,B:0,Q:0,P:0,K:0,k:0},u=0;u<8;u++){for(var e=[],i=0;i<8;i++){var r=new o;r=new o(this.white_side?this.position[u][i]:this.position[7-u][7-i]),t[this.position[u][i]]=t[this.position[u][i]]+1,e.push(r)}this.pieces.push(e)}["r","n","b","q","p"].forEach(function(u){for(var e=0;e<n[u]-t[u]&&n[u]-t[u]>0;e++)l.captured_by_white.push(new o(u,"black"));var i=u.toUpperCase();for(e=0;e<n[i]-t[i]&&n[i]-t[i]>0;e++)l.captured_by_black.push(new o(i,"white"))})},l.prototype.unselectBuildingPiece=function(){this.buildingPieces[0].forEach(function(l){l.setColor("white")}),this.buildingPieces[1].forEach(function(l){l.setColor("black")})},l.prototype.selectPiece=function(l,n){this.pieces[l][n].setColor("selected")},l.prototype.disableMaxCounts=function(){var l=this;this.unselectBuildingPiece(),this.buildingPieces.forEach(function(n){n.forEach(function(n){var t=n.get_symbol(),u=n.get_max_count(),e=0;l.position.forEach(function(l){l.forEach(function(l){l==t&&e++})}),e==u&&n.setColor("disabled")})})},l.prototype.selectAddingPiece=function(l,n){if(this.unselectBuildingPiece(),this.disableMaxCounts(),"disabled"==this.buildingPieces[l][n].get_color())return new o("");var t=new o(this.buildingPieces[l][n].get_symbol(),this.buildingPieces[l][n].get_color());return this.buildingPieces[l][n].setColor("selected"),t},l.prototype.check=function(l){this.pieces.forEach(function(n){n.forEach(function(n){"king"==n.name&&n.color==l&&n.set("king","check")})})},l.prototype.drawPossibleMoves=function(l,n){var t=this;this.drawBoard();var u={a:"0",b:"1",c:"2",d:"3",e:"4",f:"5",g:"6",h:"7"},e={8:"0",7:"1",6:"2",5:"3",4:"4",3:"5",2:"6",1:"7"};this.white_side||(u={a:"7",b:"6",c:"5",d:"4",e:"3",f:"2",g:"1",h:"0"},e={8:"7",7:"6",6:"5",5:"4",4:"3",3:"2",2:"1",1:"0"}),l.forEach(function(l){var i=u[l.from.substr(0,1)],r=e[l.from.substr(1,1)],s=u[l.to.substr(0,1)],c=e[l.to.substr(1,1)];t.pieces[r][i]=new o(n,"selected"),t.pieces[c][s]=void 0===l.captured?new o(n,"shadow"):new o(l.captured,"capture")})},l.prototype.get_piece=function(l,n){var t="";return""!==this.position[l][n]&&(t=this.position[l][n].toUpperCase()==this.position[l][n]?"white":"black"),new o(this.position[l][n],t)},l}(),c=t("xa0L"),a=function(){return function(){this.from="",this.to="",this.piece_moving="",this.piece_moving_color=""}}(),f=t("PSD3"),h=t.n(f),b=t("JEAp"),p=function(){return function(){}}(),_=t("L05t"),g=t("OptL"),d=t("sE5F"),v=t("AytR"),m=t("ZYCi"),w=function(){function l(l,n){this.http=l,this.router=n,this.url=v.a.api_lschess+"stockfish/",this.options=new d.g,this.options.headers=new d.d,this.options.headers.append("api_token",sessionStorage.getItem("api_token"))}return l.prototype.get_best_move=function(l,n){var t=this;return this.http.post(this.url+"get_best_move",JSON.stringify({fen:l,thinking_time:n}),this.options).toPromise().then(function(l){return l.json()}).catch(function(l){t.handledError(l.json())})},l.prototype.handledError=function(l){console.log(l),sessionStorage.clear(),this.router.navigate(["/login"])},l.ngInjectableDef=u.U({factory:function(){return new l(u.Y(d.e),u.Y(m.l))},token:l,providedIn:"root"}),l}(),k=function(){function l(l,n,t){this.modalDialog=l,this.bestMoveDataService=n,this.stockfishDataService=t,this.chess=new c,this.player_white="Blancas",this.player_black="Negras",this.next_turn="white",this.white_can_queen_castling=!0,this.white_can_king_castling=!0,this.black_can_queen_castling=!0,this.black_can_king_castling=!0,this.newMove=new a,this.cordsX=["a","b","c","d","e","f","g","h"],this.cordsXI=["h","g","f","e","d","c","b","a"],this.cordsY=["8","7","6","5","4","3","2","1"],this.tiempoNegras="10:00",this.tiempoBlancas="10:00",this.editarPosicion=!1,this.current_position="",this.learning=!1,this.timeNegras=600,this.timeBlancas=600,this.time_running=!1,this.user="",this.current_move=0,this.checking_move=0,this.value_of_position={white_position:0,black_position:0,white_pieces:0,black_pieces:0,white_movility:0,black_movility:0},this.sizeLeftPanel=6,this.sizeRightPanel=6,this.editing_from={row:null,colum:null},this.addingPiece=new o(""),this.new_best_move=new g.a,this.board=new s(this.chess.fen().split(" ")[0],5)}return l.prototype.ngOnInit=function(){this.user=JSON.parse(sessionStorage.getItem("user"))},l.prototype.cargarPartida=function(l){var n=this,t=new FileReader;l.target.files&&l.target.files.length>0&&(t.readAsDataURL(l.target.files[0]),t.onload=function(){var l=t.result.toString().split(",")[1],u=JSON.parse(decodeURIComponent(escape(atob(l))));n.player_black=u.player_black,n.player_white=u.player_white,n.timeBlancas=u.time_white,n.timeNegras=u.time_black,n.load_PGN(u.pgn)})},l.prototype.white_king_castling=function(){this.white_can_king_castling=!this.white_can_king_castling},l.prototype.selectBuildingPiece=function(l,n){null!=this.editing_from.row&&this.board.drawBoard(),this.editing_from.colum=null,this.editing_from.row=null,this.addingPiece=this.board.selectAddingPiece(l,n)},l.prototype.evaluateBoard=function(l){"white"==l?(this.value_of_position.white_pieces=0,this.value_of_position.white_movility=0,this.value_of_position.white_position=0):(this.value_of_position.black_pieces=0,this.value_of_position.black_movility=0,this.value_of_position.black_position=0);for(var n=0;n<8;n++)for(var t=0;t<8;t++){var u=0,e=0;this.board.white_side?(u=n,e=t):(u=7-n,e=7-t);var i=this.cordsX[e]+this.cordsY[u],r=this.board.get_piece(u,e);""!==r.name&&("white"==l?"white"==r.color&&(this.value_of_position.white_pieces+=r.numerical_value,this.value_of_position.white_movility+=this.get_possible_moves(i).length,this.value_of_position.white_position=this.value_of_position.white_pieces+this.value_of_position.white_movility):"black"==r.color&&(this.value_of_position.black_pieces+=r.numerical_value,this.value_of_position.black_movility+=this.get_possible_moves(i).length,this.value_of_position.black_position=this.value_of_position.black_pieces+this.value_of_position.black_movility))}},l.prototype.white_queen_castling=function(){this.white_can_queen_castling=!this.white_can_queen_castling},l.prototype.black_king_castling=function(){this.black_can_king_castling=!this.black_can_king_castling},l.prototype.black_queen_castling=function(){this.black_can_queen_castling=!this.black_can_queen_castling},l.prototype.set_learning=function(){this.learning=!this.learning},l.prototype.load_PGN=function(l){this.chess.load_pgn(l),this.refresh_board(),this.refreshClock()},l.prototype.PGN2Cycles=function(l){var n=l.split("\n"),t=[];return n.forEach(function(l){var n=new p;n.id=parseInt(l.split(".")[0]),n.white_move=l.split(".")[1].split(" ")[1],n.black_move=l.split(".")[1].split(" ")[2],t.push(n)}),t},l.prototype.Cycles2PGN=function(l,n){var t="",u=0;return l.forEach(function(l){void 0!==n?(u<n&&(t+=l.id+". "+l.white_move,u++),u<n&&void 0!==l.black_move&&(t+=" "+l.black_move,u++),t+="\n"):(t+=l.id+". "+l.white_move,void 0!==l.black_move&&(t+=" "+l.black_move),t+="\n")}),t},l.prototype.preview_move=function(){var l=this.PGN2Cycles(this.current_position);this.checking_move=this.checking_move-1;var n=this.Cycles2PGN(l,this.checking_move);this.chess.load_pgn(n),this.board.newPosition(this.chess.fen().split(" ")[0]),this.chess.in_check()&&this.board.check(this.get_turn())},l.prototype.cleanBoard=function(){this.board.newPosition("8/8/8/8/8/8/8/8"),this.board.disableMaxCounts()},l.prototype.resetBoard=function(){this.board.newPosition("rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR"),this.board.disableMaxCounts()},l.prototype.set_next_turn=function(){this.next_turn="white"==this.next_turn?"black":"white"},l.prototype.finishSetPosition=function(){this.editarPosicion=!1,this.set_position(this.board.get_fen())},l.prototype.cancelSetPosition=function(){this.editarPosicion=!1,this.refresh_board()},l.prototype.next_move=function(){var l=this.PGN2Cycles(this.current_position);this.checking_move=this.checking_move+1;var n=this.Cycles2PGN(l,this.checking_move);this.chess.load_pgn(n),this.board.newPosition(this.chess.fen().split(" ")[0]),this.chess.in_check()&&this.board.check(this.get_turn())},l.prototype.rotate_board=function(){this.board.rotate_board(),this.check_specials()},l.prototype.save_pgn=function(){var l={pgn:this.chess.pgn(),player_white:this.player_white,player_black:this.player_black,time_white:this.timeBlancas,time_black:this.timeNegras},n=new Blob([JSON.stringify(l)],{type:"text/plain"}),t=new Date;Object(b.saveAs)(n,t.toLocaleDateString()+"_chess.json")},l.prototype.setTimeBlancas=function(){var l=this;h.a.fire({title:"Tiempo Blancas (segundos)",input:"number",showCancelButton:!0,confirmButtonText:"Establecer"}).then(function(n){n.value>0&&(l.timeBlancas=n.value,l.refreshClock())})},l.prototype.reloj=function(){var l=this;this.chess.game_over()?this.time_running=!1:("white"==this.get_turn()?(this.current_move!=this.checking_move||this.editarPosicion||(this.timeBlancas=this.timeBlancas-1),this.refreshClock()):(this.current_move!=this.checking_move||this.editarPosicion||(this.timeNegras=this.timeNegras-1),this.refreshClock()),this.time_running&&setTimeout(function(){l.reloj()},1e3))},l.prototype.setTimeNegras=function(){var l=this;h.a.fire({title:"Tiempo Negras (segundos)",input:"number",showCancelButton:!0,confirmButtonText:"Establecer"}).then(function(n){n.value>0&&(l.timeNegras=n.value,l.refreshClock())})},l.prototype.clockText=function(l){var n=Math.round(l),t=0,u=0;n>60?(t=Math.floor(n/60),u=n-60*Math.floor(n/60)):u=n;var e=t.toString(),i=u.toString();return t<10&&(e="0"+e),u<10&&(i="0"+i),e+":"+i},l.prototype.refreshClock=function(){this.tiempoBlancas=this.clockText(this.timeBlancas),this.tiempoNegras=this.clockText(this.timeNegras),0==this.timeBlancas&&(this.time_running=!1,h.a.fire({title:"Fin del Tiempo",text:"Pierden las Blancas",type:"success",confirmButtonText:"Aceptar"})),0==this.timeNegras&&(this.time_running=!1,h.a.fire({title:"Fin del Tiempo",text:"Pierden las Negras",type:"success",confirmButtonText:"Aceptar"}))},l.prototype.new_game=function(){this.chess.reset(),this.refresh_board()},l.prototype.showPropotionMenu=function(l,n){var t=this;this.board.piecesPromote.forEach(function(l){l.setColor(t.get_turn())}),this.modalDialog.open(this.pawnPromotionModalDialog,{centered:!0}).result.then(function(u){t.chess.move({from:l,to:n,promotion:{rook:"r",knight:"n",bishop:"b",queen:"q",king:"k",pawn:"p"}[u]}),t.learn_move(),t.newMove=new a,t.refresh_board()},function(u){t.chess.move({from:l,to:n,promotion:"q"}),t.learn_move(),t.newMove=new a,t.refresh_board()})},l.prototype.play_pc=function(){var l=this;this.stockfishDataService.get_best_move(this.chess.fen(),1e3).then(function(n){l.chess.move({from:n.from,to:n.to}),l.refresh_board()}).catch(function(l){console.log(l)})},l.prototype.establecerPosicion=function(){this.board.disableMaxCounts(),this.editarPosicion=!0},l.prototype.refresh_board=function(){this.board.newPosition(this.chess.fen().split(" ")[0]),this.current_position=this.chess.pgn({max_width:5,newline_char:"\n"}),this.check_specials()},l.prototype.move=function(l,n){var t=this,u=0,e=0;if(this.board.white_side?(u=l,e=n):(u=7-l,e=7-n),this.editarPosicion)if("empty"!==this.addingPiece.get_symbol())this.board.position[u][e]=this.addingPiece.get_symbol(),this.addingPiece=new o(""),this.board.drawBoard(),this.board.unselectBuildingPiece(),this.board.disableMaxCounts();else{if(""==this.board.position[u][e]&&null==this.editing_from.row)return;null==this.editing_from.row?(this.editing_from.row=u,this.editing_from.colum=e,this.board.disableMaxCounts(),this.board.selectPiece(l,n)):(this.editing_from.row==u&&this.editing_from.colum==e?this.board.position[u][e]="":(this.board.position[u][e]=this.board.position[this.editing_from.row][this.editing_from.colum],this.board.position[this.editing_from.row][this.editing_from.colum]=""),this.board.disableMaxCounts(),this.board.drawBoard(),this.editing_from.row=null,this.editing_from.colum=null)}else{if(this.current_move!==this.checking_move)return;if(this.chess.game_over()||0==this.timeBlancas||0==this.timeNegras)return void(this.time_running=!1);this.time_running||(this.time_running=!0,this.reloj());var i=this.get_square_piece(u,e);if(""==i.piece&&""==this.newMove.from)return;if(this.get_turn()!==i.color&&""==this.newMove.from)return;if(""==this.newMove.from||this.get_turn()==i.color){var r=this.get_square_piece(u,e);this.newMove.from=this.cordsX[e]+this.cordsY[u],this.newMove.piece_moving=r.piece,this.newMove.piece_moving_color=r.color,this.board.drawPossibleMoves(this.get_possible_moves(this.newMove.from),i.piece)}else{this.newMove.to=this.cordsX[e]+this.cordsY[u];var s=this.get_possible_moves(this.newMove.from),c=!1;if(s.forEach(function(l){l.to==t.newMove.to&&(c=!0)}),!c)return this.refresh_board(),this.newMove=new a,this.current_move++,void(this.checking_move=this.current_move);this.new_best_move.current_position=this.chess.fen().split(" ")[0]+" "+this.chess.turn(),0!=u&&7!=u||"p"!=this.newMove.piece_moving?(this.chess.move({from:this.newMove.from,to:this.newMove.to}),this.learn_move(),this.refresh_board(),this.newMove=new a,this.current_move++,this.checking_move=this.current_move):this.showPropotionMenu(this.newMove.from,this.newMove.to)}}},l.prototype.learn_move=function(){var l=this;this.learning&&this.bestMoveDataService.find(this.new_best_move.current_position).then(function(n){var t=n;l.new_best_move.response=l.get_last_move();var u=!1;t.forEach(function(n){n.response==l.new_best_move.response&&(u=!0)}),u?console.log("Conocido"):l.bestMoveDataService.post(l.new_best_move).then(function(l){console.log("Aprendido")}).catch(function(l){console.log(l)})}).catch(function(l){console.log(l)})},l.prototype.get_possible_moves=function(l){return void 0===l?this.chess.moves():this.chess.moves({square:l,verbose:!0})},l.prototype.get_square_piece=function(l,n){var t=this.board.position[l][n],u="";return""==t?{piece:"",color:""}:(u=t.toLowerCase()==t?"black":"white",{piece:t.toLowerCase(),color:u})},l.prototype.get_turn=function(){var l={w:"white",b:"black"}[this.chess.turn()];return this.evaluateBoard(l),l},l.prototype.get_PGN=function(){return"<strong>Hist\xf3rico</strong><br/>"+this.chess.pgn({max_width:5,newline_char:"<br />"})},l.prototype.get_last_move=function(){var l=this.chess.pgn({max_width:5,newline_char:"\n"}).split("\n");if(""!=l){var n=l[l.length-1].split(". ")[1].split(" ");return n[n.length-1]}return l},l.prototype.check_specials=function(){var l=this,n="Negras";"white"==this.get_turn()&&(n="Blancas"),this.chess.in_check()&&this.board.check(this.get_turn()),this.chess.in_checkmate()&&h.a.fire({title:"Jaque Mate!",text:"Pierden las "+n,type:"success",confirmButtonText:"Aceptar"}),this.chess.in_draw()&&(this.chess.in_stalemate()&&h.a.fire({title:"Tablas!",text:"Ahogado, no es posible hacer m\xe1s movimientos.",type:"success",confirmButtonText:"Aceptar"}).then(function(n){l.new_game()}),this.chess.in_threefold_repetition()&&h.a.fire({title:"Tablas!",text:"Repetici\xf3n.",type:"success",confirmButtonText:"Aceptar"}).then(function(n){l.new_game()}),this.chess.insufficient_material()&&h.a.fire({title:"Tablas!",text:"Material insuficiente.",type:"success",confirmButtonText:"Aceptar"}).then(function(n){l.new_game()}))},l.prototype.set_position=function(l){var n="",t="b";this.white_can_king_castling&&(n+="K"),this.white_can_queen_castling&&(n+="Q"),this.black_can_king_castling&&(n+="k"),this.black_can_queen_castling&&(n+="q"),""==n&&(n="-"),"white"==this.next_turn&&(t="w");var u=l+" "+t+" "+n+" - 0 1";l.search("k")>-1&&l.search("K")>-1&&this.chess.load(u),this.refresh_board()},l.prototype.undo_move=function(){this.chess.undo(),this.refresh_board()},l}(),y=t("4GxJ"),P=u.pb({encapsulation:0,styles:[[".tablero[_ngcontent-%COMP%]{margin:5px auto;background:#669;border:3px solid #29293d}.tablero[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(even)   td[_ngcontent-%COMP%]:nth-child(odd), .tablero[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd)   td[_ngcontent-%COMP%]:nth-child(even){background:#f0f0f5;border:1px solid #f0f0f5}.tablero[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:hover, .tablero[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(even):hover   td[_ngcontent-%COMP%]:nth-child(odd):hover, .tablero[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd):hover   td[_ngcontent-%COMP%]:nth-child(even):hover{background-color:rgba(95,202,74,.8);border:1px solid #adff2f}.tablero[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center;border:1px solid #669}.white-turn[_ngcontent-%COMP%]{color:#fff;text-shadow:-1px 0 #000,0 2px #000,2px 0 #000,0 -1px #000}.black-turn[_ngcontent-%COMP%]{color:#3a3f4d;text-shadow:-1px 0 #000,0 2px #000,2px 0 #000,0 -1px #000}.square[_ngcontent-%COMP%]{width:9vh;height:9vh;font-size:5vh}.historical[_ngcontent-%COMP%]{width:72vh;margin:auto}.border-column[_ngcontent-%COMP%]{height:15px;font-size:6px;color:#000;font-weight:700}.border-row[_ngcontent-%COMP%]{width:15px;font-size:6px;color:#000;font-weight:700}.white[_ngcontent-%COMP%]{color:#fff;text-shadow:-1px 0 #000,0 1px #000,1px 0 #000,0 -1px #000}.black[_ngcontent-%COMP%]{color:#3a3f4d;text-shadow:-1px 0 #000,0 1px #000,1px 0 #000,0 -1px #000}.shadow[_ngcontent-%COMP%]{color:rgba(87,221,214,.6)}.disabled[_ngcontent-%COMP%]{color:rgba(162,179,178,.6)}.selected[_ngcontent-%COMP%]{color:rgba(199,219,19,.9)}.capture[_ngcontent-%COMP%]{color:rgba(226,73,13,.7);text-shadow:-1px 0 #000,0 1px #000,1px 0 #000,0 -1px #000}.check[_ngcontent-%COMP%]{color:rgba(221,49,72,.8);text-shadow:-1px 0 #000,0 1px #000,1px 0 #000,0 -1px #000}"]],data:{}});function x(l){return u.Lb(0,[(l()(),u.rb(0,0,null,null,0,"i",[["class","fas fa-square white-turn"]],null,null,null,null,null))],null,null)}function C(l){return u.Lb(0,[(l()(),u.rb(0,0,null,null,0,"i",[["class","fas fa-square black-turn"]],null,null,null,null,null))],null,null)}function E(l){return u.Lb(0,[(l()(),u.rb(0,0,null,null,1,"td",[["class","border-row"],["style","font-size: 10px;"]],null,null,null,null,null)),(l()(),u.Jb(1,null,["",""]))],null,function(l,n){l(n,1,0,n.component.cordsY[n.parent.context.index])})}function q(l){return u.Lb(0,[(l()(),u.rb(0,0,null,null,1,"td",[["class","border-row"],["style","font-size: 10px;"]],null,null,null,null,null)),(l()(),u.Jb(1,null,["",""]))],null,function(l,n){l(n,1,0,n.component.cordsY[7-n.parent.context.index])})}function N(l){return u.Lb(0,[(l()(),u.rb(0,0,null,null,1,"td",[["class","square"]],null,[[null,"click"]],function(l,n,t){var u=!0;return"click"===n&&(u=!1!==l.component.move(l.parent.context.index,l.context.index)&&u),u},null,null)),(l()(),u.rb(1,0,null,null,0,"span",[],[[8,"className",0]],null,null,null,null))],null,function(l,n){l(n,1,0,u.tb(1,"",n.context.$implicit.image,""))})}function I(l){return u.Lb(0,[(l()(),u.rb(0,0,null,null,6,"tr",[],null,null,null,null,null)),(l()(),u.ib(16777216,null,null,1,null,E)),u.qb(2,16384,null,0,r.l,[u.Q,u.N],{ngIf:[0,"ngIf"]},null),(l()(),u.ib(16777216,null,null,1,null,q)),u.qb(4,16384,null,0,r.l,[u.Q,u.N],{ngIf:[0,"ngIf"]},null),(l()(),u.ib(16777216,null,null,1,null,N)),u.qb(6,278528,null,0,r.k,[u.Q,u.N,u.t],{ngForOf:[0,"ngForOf"]},null)],function(l,n){var t=n.component;l(n,2,0,t.board.white_side),l(n,4,0,!t.board.white_side),l(n,6,0,n.context.$implicit)},null)}function M(l){return u.Lb(0,[(l()(),u.rb(0,0,null,null,1,"td",[["class","border-column"],["style","font-size: 10px;"]],null,null,null,null,null)),(l()(),u.Jb(1,null,[" "," "]))],null,function(l,n){l(n,1,0,n.context.$implicit)})}function O(l){return u.Lb(0,[(l()(),u.rb(0,0,null,null,3,"tr",[],null,null,null,null,null)),(l()(),u.rb(1,0,null,null,0,"td",[],null,null,null,null,null)),(l()(),u.ib(16777216,null,null,1,null,M)),u.qb(3,278528,null,0,r.k,[u.Q,u.N,u.t],{ngForOf:[0,"ngForOf"]},null)],function(l,n){l(n,3,0,n.component.cordsX)},null)}function S(l){return u.Lb(0,[(l()(),u.rb(0,0,null,null,1,"td",[["class","border-column"],["style","font-size: 10px;"]],null,null,null,null,null)),(l()(),u.Jb(1,null,[" "," "]))],null,function(l,n){l(n,1,0,n.context.$implicit)})}function A(l){return u.Lb(0,[(l()(),u.rb(0,0,null,null,3,"tr",[],null,null,null,null,null)),(l()(),u.rb(1,0,null,null,0,"td",[],null,null,null,null,null)),(l()(),u.ib(16777216,null,null,1,null,S)),u.qb(3,278528,null,0,r.k,[u.Q,u.N,u.t],{ngForOf:[0,"ngForOf"]},null)],function(l,n){l(n,3,0,n.component.cordsXI)},null)}function L(l){return u.Lb(0,[(l()(),u.rb(0,0,null,null,1,"button",[["class","btn btn-dark"],["title","Aprender"]],null,[[null,"click"]],function(l,n,t){var u=!0;return"click"===n&&(u=!1!==l.component.set_learning()&&u),u},null,null)),(l()(),u.rb(1,0,null,null,0,"i",[["class","fas fa-graduation-cap"]],null,null,null,null,null))],null,null)}function T(l){return u.Lb(0,[(l()(),u.rb(0,0,null,null,1,"button",[["class","btn btn-default"],["title","Aprender"]],null,[[null,"click"]],function(l,n,t){var u=!0;return"click"===n&&(u=!1!==l.component.set_learning()&&u),u},null,null)),(l()(),u.rb(1,0,null,null,0,"i",[["class","fas fa-graduation-cap"]],null,null,null,null,null))],null,null)}function B(l){return u.Lb(0,[(l()(),u.rb(0,0,null,null,1,"strong",[],null,null,null,null,null)),(l()(),u.Jb(1,null,["+",""]))],null,function(l,n){var t=n.component;l(n,1,0,t.value_of_position.white_pieces-t.value_of_position.black_pieces)})}function Q(l){return u.Lb(0,[(l()(),u.rb(0,0,null,null,0,"i",[["style","margin-left: 5px;"]],[[8,"className",0]],null,null,null,null))],null,function(l,n){l(n,0,0,u.tb(1,"",n.context.$implicit.image,""))})}function R(l){return u.Lb(0,[(l()(),u.rb(0,0,null,null,1,"strong",[],null,null,null,null,null)),(l()(),u.Jb(1,null,["+",""]))],null,function(l,n){var t=n.component;l(n,1,0,t.value_of_position.black_pieces-t.value_of_position.white_pieces)})}function D(l){return u.Lb(0,[(l()(),u.rb(0,0,null,null,0,"i",[["style","margin-left: 5px;"]],[[8,"className",0]],null,null,null,null))],null,function(l,n){l(n,0,0,u.tb(1,"",n.context.$implicit.image,""))})}function J(l){return u.Lb(0,[(l()(),u.rb(0,0,null,null,1,"td",[["class","square"]],null,[[null,"click"]],function(l,n,t){var u=!0;return"click"===n&&(u=!1!==l.component.selectBuildingPiece(l.parent.context.index,l.context.index)&&u),u},null,null)),(l()(),u.rb(1,0,null,null,0,"span",[],[[8,"className",0]],null,null,null,null))],null,function(l,n){l(n,1,0,u.tb(1,"",n.context.$implicit.image,""))})}function F(l){return u.Lb(0,[(l()(),u.rb(0,0,null,null,2,"tr",[],null,null,null,null,null)),(l()(),u.ib(16777216,null,null,1,null,J)),u.qb(2,278528,null,0,r.k,[u.Q,u.N,u.t],{ngForOf:[0,"ngForOf"]},null)],function(l,n){l(n,2,0,n.context.$implicit)},null)}function K(l){return u.Lb(0,[(l()(),u.rb(0,0,null,null,0,"i",[["class","fas fa-square white-turn"]],null,[[null,"click"]],function(l,n,t){var u=!0;return"click"===n&&(u=!1!==l.component.set_next_turn()&&u),u},null,null))],null,null)}function U(l){return u.Lb(0,[(l()(),u.rb(0,0,null,null,0,"i",[["class","fas fa-square black-turn"]],null,[[null,"click"]],function(l,n,t){var u=!0;return"click"===n&&(u=!1!==l.component.set_next_turn()&&u),u},null,null))],null,null)}function j(l){return u.Lb(0,[(l()(),u.rb(0,0,null,null,1,"label",[["style","color: lime"]],null,[[null,"click"]],function(l,n,t){var u=!0;return"click"===n&&(u=!1!==l.component.white_queen_castling()&&u),u},null,null)),(l()(),u.rb(1,0,null,null,0,"i",[["class","fas fa-chess-queen"]],null,null,null,null,null))],null,null)}function $(l){return u.Lb(0,[(l()(),u.rb(0,0,null,null,1,"label",[["style","color: red;"]],null,[[null,"click"]],function(l,n,t){var u=!0;return"click"===n&&(u=!1!==l.component.white_queen_castling()&&u),u},null,null)),(l()(),u.rb(1,0,null,null,0,"i",[["class","fas fa-chess-queen"]],null,null,null,null,null))],null,null)}function z(l){return u.Lb(0,[(l()(),u.rb(0,0,null,null,1,"label",[["style","color: lime"]],null,[[null,"click"]],function(l,n,t){var u=!0;return"click"===n&&(u=!1!==l.component.white_king_castling()&&u),u},null,null)),(l()(),u.rb(1,0,null,null,0,"i",[["class","fas fa-chess-king"]],null,null,null,null,null))],null,null)}function G(l){return u.Lb(0,[(l()(),u.rb(0,0,null,null,1,"label",[["style","color: red;"]],null,[[null,"click"]],function(l,n,t){var u=!0;return"click"===n&&(u=!1!==l.component.white_king_castling()&&u),u},null,null)),(l()(),u.rb(1,0,null,null,0,"i",[["class","fas fa-chess-king"]],null,null,null,null,null))],null,null)}function Y(l){return u.Lb(0,[(l()(),u.rb(0,0,null,null,1,"label",[["style","color: lime"]],null,[[null,"click"]],function(l,n,t){var u=!0;return"click"===n&&(u=!1!==l.component.black_queen_castling()&&u),u},null,null)),(l()(),u.rb(1,0,null,null,0,"i",[["class","fas fa-chess-queen"]],null,null,null,null,null))],null,null)}function H(l){return u.Lb(0,[(l()(),u.rb(0,0,null,null,1,"label",[["style","color: red;"]],null,[[null,"click"]],function(l,n,t){var u=!0;return"click"===n&&(u=!1!==l.component.black_queen_castling()&&u),u},null,null)),(l()(),u.rb(1,0,null,null,0,"i",[["class","fas fa-chess-queen"]],null,null,null,null,null))],null,null)}function W(l){return u.Lb(0,[(l()(),u.rb(0,0,null,null,1,"label",[["style","color: lime"]],null,[[null,"click"]],function(l,n,t){var u=!0;return"click"===n&&(u=!1!==l.component.black_king_castling()&&u),u},null,null)),(l()(),u.rb(1,0,null,null,0,"i",[["class","fas fa-chess-king"]],null,null,null,null,null))],null,null)}function X(l){return u.Lb(0,[(l()(),u.rb(0,0,null,null,1,"label",[["style","color: red;"]],null,[[null,"click"]],function(l,n,t){var u=!0;return"click"===n&&(u=!1!==l.component.black_king_castling()&&u),u},null,null)),(l()(),u.rb(1,0,null,null,0,"i",[["class","fas fa-chess-king"]],null,null,null,null,null))],null,null)}function Z(l){return u.Lb(0,[(l()(),u.rb(0,0,null,null,65,"div",[["class","row mt-3"]],null,null,null,null,null)),(l()(),u.rb(1,0,null,null,4,"div",[["class","col-12"]],null,null,null,null,null)),(l()(),u.rb(2,0,null,null,3,"table",[["class","tablero"]],null,null,null,null,null)),(l()(),u.rb(3,0,null,null,2,"tbody",[],null,null,null,null,null)),(l()(),u.ib(16777216,null,null,1,null,F)),u.qb(5,278528,null,0,r.k,[u.Q,u.N,u.t],{ngForOf:[0,"ngForOf"]},null),(l()(),u.rb(6,0,null,null,59,"div",[["class","col-12 text-center"]],null,null,null,null,null)),(l()(),u.rb(7,0,null,null,24,"table",[["style","width: 54vh; margin: auto;"]],null,null,null,null,null)),(l()(),u.rb(8,0,null,null,23,"tbody",[],null,null,null,null,null)),(l()(),u.rb(9,0,null,null,22,"tr",[],null,null,null,null,null)),(l()(),u.rb(10,0,null,null,3,"th",[["class","text-right"]],null,null,null,null,null)),(l()(),u.rb(11,0,null,null,2,"label",[],null,null,null,null,null)),(l()(),u.rb(12,0,null,null,1,"strong",[],null,null,null,null,null)),(l()(),u.Jb(-1,null,["Juegan:"])),(l()(),u.rb(14,0,null,null,6,"td",[["class","text-left"]],null,null,null,null,null)),(l()(),u.rb(15,0,null,null,5,"label",[],null,null,null,null,null)),(l()(),u.Jb(-1,null,["\xa0"])),(l()(),u.ib(16777216,null,null,1,null,K)),u.qb(18,16384,null,0,r.l,[u.Q,u.N],{ngIf:[0,"ngIf"]},null),(l()(),u.ib(16777216,null,null,1,null,U)),u.qb(20,16384,null,0,r.l,[u.Q,u.N],{ngIf:[0,"ngIf"]},null),(l()(),u.rb(21,0,null,null,10,"td",[],null,null,null,null,null)),(l()(),u.rb(22,0,null,null,2,"button",[["class","btn btn-default mr-2"],["title","Limpiar Tablero"]],null,[[null,"click"]],function(l,n,t){var u=!0;return"click"===n&&(u=!1!==l.component.cleanBoard()&&u),u},null,null)),(l()(),u.rb(23,0,null,null,0,"i",[["class","fas fa-eraser"]],null,null,null,null,null)),(l()(),u.rb(24,0,null,null,0,"i",[["class","fas fa-chess-board"]],null,null,null,null,null)),(l()(),u.rb(25,0,null,null,2,"button",[["class","btn btn-default mr-2"],["title","Reiniciar Posici\xf3n"]],null,[[null,"click"]],function(l,n,t){var u=!0;return"click"===n&&(u=!1!==l.component.resetBoard()&&u),u},null,null)),(l()(),u.rb(26,0,null,null,0,"i",[["class","fas fa-sync"]],null,null,null,null,null)),(l()(),u.rb(27,0,null,null,0,"i",[["class","fas fa-chess-board"]],null,null,null,null,null)),(l()(),u.rb(28,0,null,null,1,"button",[["class","btn btn-success mr-2"],["title","Aceptar"]],null,[[null,"click"]],function(l,n,t){var u=!0;return"click"===n&&(u=!1!==l.component.finishSetPosition()&&u),u},null,null)),(l()(),u.rb(29,0,null,null,0,"i",[["class","fas fa-check-circle"]],null,null,null,null,null)),(l()(),u.rb(30,0,null,null,1,"button",[["class","btn btn-danger"],["title","Cancelar"]],null,[[null,"click"]],function(l,n,t){var u=!0;return"click"===n&&(u=!1!==l.component.cancelSetPosition()&&u),u},null,null)),(l()(),u.rb(31,0,null,null,0,"i",[["class","fas fa-times-circle"]],null,null,null,null,null)),(l()(),u.rb(32,0,null,null,33,"table",[["class","mt-2"],["style","width: 54vh; margin: auto;"]],null,null,null,null,null)),(l()(),u.rb(33,0,null,null,32,"tbody",[],null,null,null,null,null)),(l()(),u.rb(34,0,null,null,15,"tr",[],null,null,null,null,null)),(l()(),u.rb(35,0,null,null,3,"th",[["class","text-right"]],null,null,null,null,null)),(l()(),u.rb(36,0,null,null,2,"label",[],null,null,null,null,null)),(l()(),u.rb(37,0,null,null,1,"strong",[],null,null,null,null,null)),(l()(),u.Jb(-1,null,["Enroques Blancas:"])),(l()(),u.rb(39,0,null,null,10,"td",[["class","text-left"]],null,null,null,null,null)),(l()(),u.Jb(-1,null,["\xa0"])),(l()(),u.ib(16777216,null,null,1,null,j)),u.qb(42,16384,null,0,r.l,[u.Q,u.N],{ngIf:[0,"ngIf"]},null),(l()(),u.ib(16777216,null,null,1,null,$)),u.qb(44,16384,null,0,r.l,[u.Q,u.N],{ngIf:[0,"ngIf"]},null),(l()(),u.Jb(-1,null,["\xa0"])),(l()(),u.ib(16777216,null,null,1,null,z)),u.qb(47,16384,null,0,r.l,[u.Q,u.N],{ngIf:[0,"ngIf"]},null),(l()(),u.ib(16777216,null,null,1,null,G)),u.qb(49,16384,null,0,r.l,[u.Q,u.N],{ngIf:[0,"ngIf"]},null),(l()(),u.rb(50,0,null,null,15,"tr",[],null,null,null,null,null)),(l()(),u.rb(51,0,null,null,3,"th",[["class","text-right"]],null,null,null,null,null)),(l()(),u.rb(52,0,null,null,2,"label",[],null,null,null,null,null)),(l()(),u.rb(53,0,null,null,1,"strong",[],null,null,null,null,null)),(l()(),u.Jb(-1,null,["Enroques Negras:"])),(l()(),u.rb(55,0,null,null,10,"td",[["class","text-left"]],null,null,null,null,null)),(l()(),u.Jb(-1,null,["\xa0"])),(l()(),u.ib(16777216,null,null,1,null,Y)),u.qb(58,16384,null,0,r.l,[u.Q,u.N],{ngIf:[0,"ngIf"]},null),(l()(),u.ib(16777216,null,null,1,null,H)),u.qb(60,16384,null,0,r.l,[u.Q,u.N],{ngIf:[0,"ngIf"]},null),(l()(),u.Jb(-1,null,["\xa0"])),(l()(),u.ib(16777216,null,null,1,null,W)),u.qb(63,16384,null,0,r.l,[u.Q,u.N],{ngIf:[0,"ngIf"]},null),(l()(),u.ib(16777216,null,null,1,null,X)),u.qb(65,16384,null,0,r.l,[u.Q,u.N],{ngIf:[0,"ngIf"]},null)],function(l,n){var t=n.component;l(n,5,0,t.board.buildingPieces),l(n,18,0,"white"==t.next_turn),l(n,20,0,"black"==t.next_turn),l(n,42,0,t.white_can_queen_castling),l(n,44,0,!t.white_can_queen_castling),l(n,47,0,t.white_can_king_castling),l(n,49,0,!t.white_can_king_castling),l(n,58,0,t.black_can_queen_castling),l(n,60,0,!t.black_can_queen_castling),l(n,63,0,t.black_can_king_castling),l(n,65,0,!t.black_can_king_castling)},null)}function V(l){return u.Lb(0,[(l()(),u.rb(0,0,null,null,1,"td",[["class","square"]],null,[[null,"click"]],function(l,n,t){var u=!0;return"click"===n&&(u=!1!==l.parent.context.close(l.context.$implicit.name)&&u),u},null,null)),(l()(),u.rb(1,0,null,null,0,"span",[],[[8,"className",0]],null,null,null,null))],null,function(l,n){l(n,1,0,u.tb(1,"",n.context.$implicit.image,""))})}function ll(l){return u.Lb(0,[(l()(),u.rb(0,0,null,null,6,"div",[["class","modal-header"]],null,null,null,null,null)),(l()(),u.rb(1,0,null,null,2,"h4",[["class","modal-title"],["id","modal-basic-title"]],null,null,null,null,null)),(l()(),u.rb(2,0,null,null,1,"strong",[],null,null,null,null,null)),(l()(),u.Jb(-1,null,["Promoci\xf3n de Pe\xf3n - Seleccione:"])),(l()(),u.rb(4,0,null,null,2,"button",[["class","close"],["type","button"]],null,[[null,"click"]],function(l,n,t){var u=!0;return"click"===n&&(u=!1!==l.context.dismiss("Cross click")&&u),u},null,null)),(l()(),u.rb(5,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),u.Jb(-1,null,["\xd7"])),(l()(),u.rb(7,0,null,null,5,"div",[["class","modal-body"]],null,null,null,null,null)),(l()(),u.rb(8,0,null,null,4,"table",[],null,null,null,null,null)),(l()(),u.rb(9,0,null,null,3,"tbody",[],null,null,null,null,null)),(l()(),u.rb(10,0,null,null,2,"tr",[],null,null,null,null,null)),(l()(),u.ib(16777216,null,null,1,null,V)),u.qb(12,278528,null,0,r.k,[u.Q,u.N,u.t],{ngForOf:[0,"ngForOf"]},null),(l()(),u.rb(13,0,null,null,4,"div",[["class","modal-footer"]],null,null,null,null,null)),(l()(),u.rb(14,0,null,null,1,"button",[["class","btn btn-outline-danger"],["type","button"]],null,[[null,"click"]],function(l,n,t){var u=!0;return"click"===n&&(u=!1!==l.context.dismiss("Cross click")&&u),u},null,null)),(l()(),u.Jb(-1,null,[" Cancelar "])),(l()(),u.rb(16,0,null,null,1,"button",[["class","btn btn-success"],["type","button"]],null,[[null,"click"]],function(l,n,t){var u=!0;return"click"===n&&(u=!1!==l.context.close("ok")&&u),u},null,null)),(l()(),u.Jb(-1,null,[" Aceptar "]))],function(l,n){l(n,12,0,n.component.board.piecesPromote)},null)}function nl(l){return u.Lb(0,[u.Hb(402653184,1,{pawnPromotionModalDialog:0}),(l()(),u.rb(1,0,[["cargarPartidaInput",1]],null,0,"input",[["accept",".json"],["name","files[]"],["type","file"]],[[8,"hidden",0]],[[null,"change"]],function(l,n,t){var u=!0;return"change"===n&&(u=!1!==l.component.cargarPartida(t)&&u),u},null,null)),(l()(),u.rb(2,0,null,null,45,"div",[["class","row"]],null,null,null,null,null)),(l()(),u.rb(3,0,null,null,7,"div",[["class","col-6"]],null,null,null,null,null)),(l()(),u.rb(4,0,null,null,6,"div",[["class","historical"]],null,null,null,null,null)),(l()(),u.rb(5,0,null,null,1,"button",[["class","btn btn-info col-4"],["title","Movimiento Anterior"]],[[8,"disabled",0]],[[null,"click"]],function(l,n,t){var u=!0;return"click"===n&&(u=!1!==l.component.preview_move()&&u),u},null,null)),(l()(),u.rb(6,0,null,null,0,"i",[["class","fas fa-angle-left"]],null,null,null,null,null)),(l()(),u.rb(7,0,null,null,1,"button",[["class","btn btn-secondary col-3 ml-2 mr-2"],["title","Rotar Tablero"]],null,[[null,"click"]],function(l,n,t){var u=!0;return"click"===n&&(u=!1!==l.component.rotate_board()&&u),u},null,null)),(l()(),u.rb(8,0,null,null,0,"i",[["class","fas fa-sync"]],null,null,null,null,null)),(l()(),u.rb(9,0,null,null,1,"button",[["class","btn btn-info col-4"],["title","Movimiento Siguiente"]],[[8,"disabled",0]],[[null,"click"]],function(l,n,t){var u=!0;return"click"===n&&(u=!1!==l.component.next_move()&&u),u},null,null)),(l()(),u.rb(10,0,null,null,0,"i",[["class","fas fa-angle-right"]],null,null,null,null,null)),(l()(),u.rb(11,0,null,null,36,"div",[["class","col-6"]],null,null,null,null,null)),(l()(),u.rb(12,0,null,null,35,"table",[["class","col-12"]],null,null,null,null,null)),(l()(),u.rb(13,0,null,null,34,"tbody",[],null,null,null,null,null)),(l()(),u.rb(14,0,null,null,33,"tr",[],null,null,null,null,null)),(l()(),u.rb(15,0,null,null,11,"td",[],null,null,null,null,null)),(l()(),u.rb(16,0,null,null,10,"div",[["aria-label","Toolbar with button groups"],["class","btn-toolbar"],["role","toolbar"]],null,null,null,null,null)),(l()(),u.rb(17,0,null,null,9,"div",[["aria-label","First group"],["class","btn-group"],["role","group"]],null,null,null,null,null)),(l()(),u.rb(18,0,null,null,2,"button",[["class","btn btn-dark"],["title","Nueva - P vs P"]],null,null,null,null,null)),(l()(),u.rb(19,0,null,null,0,"i",[["class","fas fa-user"]],null,null,null,null,null)),(l()(),u.rb(20,0,null,null,0,"i",[["class","fas fa-user"]],null,null,null,null,null)),(l()(),u.rb(21,0,null,null,2,"button",[["class","btn btn-default"],["title","Play PC"]],null,[[null,"click"]],function(l,n,t){var u=!0;return"click"===n&&(u=!1!==l.component.play_pc()&&u),u},null,null)),(l()(),u.rb(22,0,null,null,0,"i",[["class","fas fa-robot"]],null,null,null,null,null)),(l()(),u.rb(23,0,null,null,0,"i",[["class","fas fa-user"]],null,null,null,null,null)),(l()(),u.rb(24,0,null,null,2,"button",[["class","btn btn-default"],["title","Nueva - IA vs IA"]],null,null,null,null,null)),(l()(),u.rb(25,0,null,null,0,"i",[["class","fas fa-robot"]],null,null,null,null,null)),(l()(),u.rb(26,0,null,null,0,"i",[["class","fas fa-robot"]],null,null,null,null,null)),(l()(),u.rb(27,0,null,null,3,"th",[["class","text-right"]],null,null,null,null,null)),(l()(),u.rb(28,0,null,null,2,"label",[],null,null,null,null,null)),(l()(),u.rb(29,0,null,null,1,"strong",[],null,null,null,null,null)),(l()(),u.Jb(-1,null,["Juegan:"])),(l()(),u.rb(31,0,null,null,6,"td",[["class","text-left"]],null,null,null,null,null)),(l()(),u.rb(32,0,null,null,5,"label",[],null,null,null,null,null)),(l()(),u.Jb(-1,null,["\xa0"])),(l()(),u.ib(16777216,null,null,1,null,x)),u.qb(35,16384,null,0,r.l,[u.Q,u.N],{ngIf:[0,"ngIf"]},null),(l()(),u.ib(16777216,null,null,1,null,C)),u.qb(37,16384,null,0,r.l,[u.Q,u.N],{ngIf:[0,"ngIf"]},null),(l()(),u.rb(38,0,null,null,4,"th",[["class","text-center"]],null,null,null,null,null)),(l()(),u.rb(39,0,null,null,3,"label",[],null,[[null,"click"]],function(l,n,t){var u=!0;return"click"===n&&(u=!1!==l.component.setTimeBlancas()&&u),u},null,null)),(l()(),u.rb(40,0,null,null,1,"strong",[],null,null,null,null,null)),(l()(),u.Jb(-1,null,["Blancas:"])),(l()(),u.Jb(42,null,["\xa0",""])),(l()(),u.rb(43,0,null,null,4,"th",[["class","text-center"]],null,null,null,null,null)),(l()(),u.rb(44,0,null,null,3,"label",[],null,[[null,"click"]],function(l,n,t){var u=!0;return"click"===n&&(u=!1!==l.component.setTimeNegras()&&u),u},null,null)),(l()(),u.rb(45,0,null,null,1,"strong",[],null,null,null,null,null)),(l()(),u.Jb(-1,null,["Negras:"])),(l()(),u.Jb(47,null,["\xa0",""])),(l()(),u.rb(48,0,null,null,70,"div",[["class","row"]],null,null,null,null,null)),(l()(),u.rb(49,0,null,null,8,"div",[["class","col-6"]],null,null,null,null,null)),(l()(),u.rb(50,0,null,null,7,"table",[["class","tablero"]],null,null,null,null,null)),(l()(),u.rb(51,0,null,null,6,"tbody",[],null,null,null,null,null)),(l()(),u.ib(16777216,null,null,1,null,I)),u.qb(53,278528,null,0,r.k,[u.Q,u.N,u.t],{ngForOf:[0,"ngForOf"]},null),(l()(),u.ib(16777216,null,null,1,null,O)),u.qb(55,16384,null,0,r.l,[u.Q,u.N],{ngIf:[0,"ngIf"]},null),(l()(),u.ib(16777216,null,null,1,null,A)),u.qb(57,16384,null,0,r.l,[u.Q,u.N],{ngIf:[0,"ngIf"]},null),(l()(),u.rb(58,0,null,null,60,"div",[["class","col-6"]],null,null,null,null,null)),(l()(),u.rb(59,0,null,null,57,"div",[["class","row mt-2"]],null,null,null,null,null)),(l()(),u.rb(60,0,null,null,20,"div",[["class","col-6"]],null,null,null,null,null)),(l()(),u.rb(61,0,null,null,17,"div",[["class","row"]],null,null,null,null,null)),(l()(),u.rb(62,0,null,null,16,"div",[["class","col-12"]],null,null,null,null,null)),(l()(),u.rb(63,0,null,null,15,"div",[["aria-label","Toolbar with button groups"],["class","btn-toolbar"],["role","toolbar"]],null,null,null,null,null)),(l()(),u.rb(64,0,null,null,6,"div",[["aria-label","First group"],["class","btn-group mr-2"],["role","group"]],null,null,null,null,null)),(l()(),u.rb(65,0,null,null,1,"button",[["class","btn btn-info"],["title","Deshacer Movimiento"]],null,[[null,"click"]],function(l,n,t){var u=!0;return"click"===n&&(u=!1!==l.component.undo_move()&&u),u},null,null)),(l()(),u.rb(66,0,null,null,0,"i",[["class","fas fa-arrow-left"]],null,null,null,null,null)),(l()(),u.rb(67,0,null,null,1,"button",[["class","btn btn-info"],["title","Guardar Partida"]],null,[[null,"click"]],function(l,n,t){var u=!0;return"click"===n&&(u=!1!==l.component.save_pgn()&&u),u},null,null)),(l()(),u.rb(68,0,null,null,0,"i",[["class","fas fa-save"]],null,null,null,null,null)),(l()(),u.rb(69,0,null,null,1,"button",[["class","btn btn-info"],["title","Cargar Partida"]],null,[[null,"click"]],function(l,n,t){var e=!0;return"click"===n&&(e=!1!==u.Bb(l,1).click()&&e),e},null,null)),(l()(),u.rb(70,0,null,null,0,"i",[["class","fas fa-folder-open"]],null,null,null,null,null)),(l()(),u.rb(71,0,null,null,2,"div",[["aria-label","First group"],["class","btn-group mr-2"],["role","group"]],null,null,null,null,null)),(l()(),u.rb(72,0,null,null,1,"button",[["class","btn btn-info"],["title","Establecer Posici\xf3n"]],null,[[null,"click"]],function(l,n,t){var u=!0;return"click"===n&&(u=!1!==l.component.establecerPosicion()&&u),u},null,null)),(l()(),u.rb(73,0,null,null,0,"i",[["class","fas fa-tools"]],null,null,null,null,null)),(l()(),u.rb(74,0,null,null,4,"div",[["aria-label","First group"],["class","btn-group"],["role","group"]],null,null,null,null,null)),(l()(),u.ib(16777216,null,null,1,null,L)),u.qb(76,16384,null,0,r.l,[u.Q,u.N],{ngIf:[0,"ngIf"]},null),(l()(),u.ib(16777216,null,null,1,null,T)),u.qb(78,16384,null,0,r.l,[u.Q,u.N],{ngIf:[0,"ngIf"]},null),(l()(),u.rb(79,0,null,null,1,"div",[["class","row mt-3"]],null,null,null,null,null)),(l()(),u.rb(80,0,null,null,0,"div",[["class","col-12"],["style","overflow-y: auto; overflow-x: hidden; height: 200px;"]],[[8,"innerHTML",1]],null,null,null,null)),(l()(),u.rb(81,0,null,null,35,"div",[["class","col-6"]],null,null,null,null,null)),(l()(),u.rb(82,0,null,null,34,"div",[["class","row"]],null,null,null,null,null)),(l()(),u.rb(83,0,null,null,33,"table",[["style","width: 100%; text-align: left;"]],null,null,null,null,null)),(l()(),u.rb(84,0,null,null,32,"tbody",[],null,null,null,null,null)),(l()(),u.rb(85,0,null,null,2,"tr",[],null,null,null,null,null)),(l()(),u.rb(86,0,null,null,1,"th",[["colspan","2"],["style","text-align: center;"]],null,null,null,null,null)),(l()(),u.Jb(87,null,["",""])),(l()(),u.rb(88,0,null,null,7,"tr",[],null,null,null,null,null)),(l()(),u.rb(89,0,null,null,3,"th",[],null,null,null,null,null)),(l()(),u.Jb(-1,null,["Capturas "])),(l()(),u.ib(16777216,null,null,1,null,B)),u.qb(92,16384,null,0,r.l,[u.Q,u.N],{ngIf:[0,"ngIf"]},null),(l()(),u.rb(93,0,null,null,2,"td",[],null,null,null,null,null)),(l()(),u.ib(16777216,null,null,1,null,Q)),u.qb(95,278528,null,0,r.k,[u.Q,u.N,u.t],{ngForOf:[0,"ngForOf"]},null),(l()(),u.rb(96,0,null,null,4,"tr",[],null,null,null,null,null)),(l()(),u.rb(97,0,null,null,1,"th",[],null,null,null,null,null)),(l()(),u.Jb(-1,null,["Movilidad"])),(l()(),u.rb(99,0,null,null,1,"td",[],null,null,null,null,null)),(l()(),u.Jb(100,null,[" "," "])),(l()(),u.rb(101,0,null,null,2,"tr",[],null,null,null,null,null)),(l()(),u.rb(102,0,null,null,1,"th",[["colspan","2"],["style","text-align: center;"]],null,null,null,null,null)),(l()(),u.Jb(103,null,["",""])),(l()(),u.rb(104,0,null,null,7,"tr",[],null,null,null,null,null)),(l()(),u.rb(105,0,null,null,3,"th",[],null,null,null,null,null)),(l()(),u.Jb(-1,null,["Capturas "])),(l()(),u.ib(16777216,null,null,1,null,R)),u.qb(108,16384,null,0,r.l,[u.Q,u.N],{ngIf:[0,"ngIf"]},null),(l()(),u.rb(109,0,null,null,2,"td",[],null,null,null,null,null)),(l()(),u.ib(16777216,null,null,1,null,D)),u.qb(111,278528,null,0,r.k,[u.Q,u.N,u.t],{ngForOf:[0,"ngForOf"]},null),(l()(),u.rb(112,0,null,null,4,"tr",[],null,null,null,null,null)),(l()(),u.rb(113,0,null,null,1,"th",[],null,null,null,null,null)),(l()(),u.Jb(-1,null,["Movilidad"])),(l()(),u.rb(115,0,null,null,1,"td",[],null,null,null,null,null)),(l()(),u.Jb(116,null,[" "," "])),(l()(),u.ib(16777216,null,null,1,null,Z)),u.qb(118,16384,null,0,r.l,[u.Q,u.N],{ngIf:[0,"ngIf"]},null),(l()(),u.ib(0,[[1,2],["pawnPromotionModalDialog",2]],null,0,null,ll))],function(l,n){var t=n.component;l(n,35,0,"white"==t.get_turn()),l(n,37,0,"black"==t.get_turn()),l(n,53,0,t.board.pieces),l(n,55,0,t.board.white_side),l(n,57,0,!t.board.white_side),l(n,76,0,t.learning),l(n,78,0,!t.learning),l(n,92,0,t.value_of_position.white_pieces-t.value_of_position.black_pieces>0&&t.value_of_position.white_pieces-t.value_of_position.black_pieces<1039),l(n,95,0,t.board.captured_by_white),l(n,108,0,t.value_of_position.black_pieces-t.value_of_position.white_pieces>0&&t.value_of_position.black_pieces-t.value_of_position.white_pieces<1039),l(n,111,0,t.board.captured_by_black),l(n,118,0,t.editarPosicion)},function(l,n){var t=n.component;l(n,1,0,!0),l(n,5,0,0==t.checking_move),l(n,9,0,t.checking_move==t.current_move),l(n,42,0,t.tiempoBlancas),l(n,47,0,t.tiempoNegras),l(n,80,0,t.get_PGN()),l(n,87,0,t.player_white),l(n,100,0,t.value_of_position.white_movility),l(n,103,0,t.player_black),l(n,116,0,t.value_of_position.black_movility)})}function tl(l){return u.Lb(0,[(l()(),u.rb(0,0,null,null,1,"app-main",[],null,null,null,nl,P)),u.qb(1,114688,null,0,k,[y.v,_.a,w],null,null)],function(l,n){l(n,1,0)},null)}var ul=u.nb("app-main",k,tl,{},{},[]),el=function(){return function(){}}();t.d(n,"MainModuleNgFactory",function(){return il});var il=u.ob(e,[],function(l){return u.yb([u.zb(512,u.j,u.db,[[8,[i.a,ul]],[3,u.j],u.y]),u.zb(4608,r.n,r.m,[u.v,[2,r.C]]),u.zb(4608,_.a,_.a,[d.e,m.l]),u.zb(4608,w,w,[d.e,m.l]),u.zb(1073742336,r.b,r.b,[]),u.zb(1073742336,m.o,m.o,[[2,m.u],[2,m.l]]),u.zb(1073742336,el,el,[]),u.zb(1073742336,e,e,[]),u.zb(1024,m.j,function(){return[[{path:"",component:k}]]},[])])})},xa0L:function(l,n,t){var u,e=function(l){var n="b",t="w",u=-1,e="p",i="n",r="b",o="r",s="q",c="k",a="pnbrqkPNBRQK",f="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",h=["1-0","0-1","1/2-1/2","*"],b={b:[16,32,17,15],w:[-16,-32,-17,-15]},p={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},_=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],g=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],d={p:0,n:1,b:2,r:3,q:4,k:5},v={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q"},m={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64},w=7,k=6,y=1,P=0,x={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},C={w:[{square:x.a1,flag:m.QSIDE_CASTLE},{square:x.h1,flag:m.KSIDE_CASTLE}],b:[{square:x.a8,flag:m.QSIDE_CASTLE},{square:x.h8,flag:m.KSIDE_CASTLE}]},E=new Array(128),q={w:u,b:u},N=t,I={w:0,b:0},M=u,O=0,S=1,A=[],L={};function T(){E=new Array(128),q={w:u,b:u},N=t,I={w:0,b:0},M=u,O=0,S=1,A=[],L={},F(D())}function B(){Q(f)}function Q(l){var e=l.split(/\s+/),i=e[0],r=0;if(!R(l).valid)return!1;T();for(var o=0;o<i.length;o++){var s=i.charAt(o);if("/"===s)r+=8;else if(-1!=="0123456789".indexOf(s))r+=parseInt(s,10);else{var c=s<"a"?t:n;U({type:s.toLowerCase(),color:c},rl(r)),r++}}return N=e[1],e[2].indexOf("K")>-1&&(I.w|=m.KSIDE_CASTLE),e[2].indexOf("Q")>-1&&(I.w|=m.QSIDE_CASTLE),e[2].indexOf("k")>-1&&(I.b|=m.KSIDE_CASTLE),e[2].indexOf("q")>-1&&(I.b|=m.QSIDE_CASTLE),M="-"===e[3]?u:x[e[3]],O=parseInt(e[4],10),S=parseInt(e[5],10),F(D()),!0}function R(l){var n=l.split(/\s+/);if(6!==n.length)return{valid:!1,error_number:1,error:"FEN string must contain six space-delimited fields."};if(isNaN(n[5])||parseInt(n[5],10)<=0)return{valid:!1,error_number:2,error:"6th field (move number) must be a positive integer."};if(isNaN(n[4])||parseInt(n[4],10)<0)return{valid:!1,error_number:3,error:"5th field (half move counter) must be a non-negative integer."};if(!/^(-|[abcdefgh][36])$/.test(n[3]))return{valid:!1,error_number:4,error:"4th field (en-passant square) is invalid."};if(!/^(KQ?k?q?|Qk?q?|kq?|q|-)$/.test(n[2]))return{valid:!1,error_number:5,error:"3rd field (castling availability) is invalid."};if(!/^(w|b)$/.test(n[1]))return{valid:!1,error_number:6,error:"2nd field (side to move) is invalid."};var t=n[0].split("/");if(8!==t.length)return{valid:!1,error_number:7,error:"1st field (piece positions) does not contain 8 '/'-delimited rows."};for(var u=0;u<t.length;u++){for(var e=0,i=!1,r=0;r<t[u].length;r++)if(isNaN(t[u][r])){if(!/^[prnbqkPRNBQK]$/.test(t[u][r]))return{valid:!1,error_number:9,error:"1st field (piece positions) is invalid [invalid piece]."};e+=1,i=!1}else{if(i)return{valid:!1,error_number:8,error:"1st field (piece positions) is invalid [consecutive numbers]."};e+=parseInt(t[u][r],10),i=!0}if(8!==e)return{valid:!1,error_number:10,error:"1st field (piece positions) is invalid [row too large]."}}return"3"==n[3][1]&&"w"==n[1]||"6"==n[3][1]&&"b"==n[1]?{valid:!1,error_number:11,error:"Illegal en-passant square"}:{valid:!0,error_number:0,error:"No errors."}}function D(){for(var l=0,e="",i=x.a8;i<=x.h1;i++){if(null==E[i])l++;else{l>0&&(e+=l,l=0);var r=E[i].type;e+=E[i].color===t?r.toUpperCase():r.toLowerCase()}i+1&136&&(l>0&&(e+=l),i!==x.h1&&(e+="/"),l=0,i+=8)}var o="";I[t]&m.KSIDE_CASTLE&&(o+="K"),I[t]&m.QSIDE_CASTLE&&(o+="Q"),I[n]&m.KSIDE_CASTLE&&(o+="k"),I[n]&m.QSIDE_CASTLE&&(o+="q"),o=o||"-";var s=M===u?"-":rl(M);return[e,N,o,s,O,S].join(" ")}function J(l){for(var n=0;n<l.length;n+=2)"string"==typeof l[n]&&"string"==typeof l[n+1]&&(L[l[n]]=l[n+1]);return L}function F(l){A.length>0||(l!==f?(L.SetUp="1",L.FEN=l):(delete L.SetUp,delete L.FEN))}function K(l){var n=E[x[l]];return n?{type:n.type,color:n.color}:null}function U(l,n){if(!("type"in l&&"color"in l))return!1;if(-1===a.indexOf(l.type.toLowerCase()))return!1;if(!(n in x))return!1;var t=x[n];return(l.type!=c||q[l.color]==u||q[l.color]==t)&&(E[t]={type:l.type,color:l.color},l.type===c&&(q[l.color]=t),F(D()),!0)}function j(l,n,t,u,i){var r={color:N,from:n,to:t,flags:u,piece:l[n].type};return i&&(r.flags|=m.PROMOTION,r.promotion=i),l[t]?r.captured=l[t].type:u&m.EP_CAPTURE&&(r.captured=e),r}function $(l){function n(l,n,t,u,c){if(l[t].type!==e||el(u)!==P&&el(u)!==w)n.push(j(l,t,u,c));else for(var a=[s,o,r,i],f=0,h=a.length;f<h;f++)n.push(j(l,t,u,c,a[f]))}var t=[],u=N,c=ol(u),a={b:y,w:k},f=x.a8,h=x.h1,_=!1,g=!(void 0!==l&&"legal"in l)||l.legal;if(void 0!==l&&"square"in l){if(!(l.square in x))return[];f=h=x[l.square],_=!0}for(var d=f;d<=h;d++)if(136&d)d+=7;else{var v=E[d];if(null!=v&&v.color===u)if(v.type===e){if(null==E[C=d+b[u][0]]){n(E,t,d,C,m.NORMAL);var C=d+b[u][1];a[u]===el(d)&&null==E[C]&&n(E,t,d,C,m.BIG_PAWN)}for(O=2;O<4;O++)136&(C=d+b[u][O])||(null!=E[C]&&E[C].color===c?n(E,t,d,C,m.CAPTURE):C===M&&n(E,t,d,M,m.EP_CAPTURE))}else for(var O=0,S=p[v.type].length;O<S;O++){var A=p[v.type][O];for(C=d;!(136&(C+=A));){if(null!=E[C]){if(E[C].color===u)break;n(E,t,d,C,m.CAPTURE);break}if(n(E,t,d,C,m.NORMAL),"n"===v.type||"k"===v.type)break}}}if(!_||h===q[u]){if(I[u]&m.KSIDE_CASTLE){var L=(T=q[u])+2;null!=E[T+1]||null!=E[L]||Y(c,q[u])||Y(c,T+1)||Y(c,L)||n(E,t,q[u],L,m.KSIDE_CASTLE)}var T;I[u]&m.QSIDE_CASTLE&&(L=(T=q[u])-2,null!=E[T-1]||null!=E[T-2]||null!=E[T-3]||Y(c,q[u])||Y(c,T-1)||Y(c,L)||n(E,t,q[u],L,m.QSIDE_CASTLE))}if(!g)return t;var B=[];for(d=0,S=t.length;d<S;d++)nl(t[d]),H(u)||B.push(t[d]),tl();return B}function z(l,n){var t="";if(l.flags&m.KSIDE_CASTLE)t="O-O";else if(l.flags&m.QSIDE_CASTLE)t="O-O-O";else{var u=function(l,n){for(var t=$({legal:!n}),u=l.from,e=l.to,i=l.piece,r=0,o=0,s=0,c=0,a=t.length;c<a;c++){var f=t[c].from;i===t[c].piece&&u!==f&&e===t[c].to&&(r++,el(u)===el(f)&&o++,il(u)===il(f)&&s++)}return r>0?o>0&&s>0?rl(u):s>0?rl(u).charAt(1):rl(u).charAt(0):""}(l,n);l.piece!==e&&(t+=l.piece.toUpperCase()+u),l.flags&(m.CAPTURE|m.EP_CAPTURE)&&(l.piece===e&&(t+=rl(l.from)[0]),t+="x"),t+=rl(l.to),l.flags&m.PROMOTION&&(t+="="+l.promotion.toUpperCase())}return nl(l),W()&&(X()?t+="#":t+="+"),tl(),t}function G(l){return l.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}function Y(l,u){for(var i=x.a8;i<=x.h1;i++)if(136&i)i+=7;else if(null!=E[i]&&E[i].color===l){var r=E[i],o=i-u,s=o+119;if(_[s]&1<<d[r.type]){if(r.type===e){if(o>0){if(r.color===t)return!0}else if(r.color===n)return!0;continue}if("n"===r.type||"k"===r.type)return!0;for(var c=g[s],a=i+c,f=!1;a!==u;){if(null!=E[a]){f=!0;break}a+=c}if(!f)return!0}}return!1}function H(l){return Y(ol(l),q[l])}function W(){return H(N)}function X(){return W()&&0===$().length}function Z(){return!W()&&0===$().length}function V(){for(var l={},n=[],t=0,u=0,e=x.a8;e<=x.h1;e++)if(u=(u+1)%2,136&e)e+=7;else{var o=E[e];o&&(l[o.type]=o.type in l?l[o.type]+1:1,o.type===r&&n.push(u),t++)}if(2===t)return!0;if(3===t&&(1===l[r]||1===l[i]))return!0;if(t===l[r]+2){var s=0,c=n.length;for(e=0;e<c;e++)s+=n[e];if(0===s||s===c)return!0}return!1}function ll(){for(var l=[],n={},t=!1;;){var u=tl();if(!u)break;l.push(u)}for(;;){var e=D().split(" ").slice(0,4).join(" ");if(n[e]=e in n?n[e]+1:1,n[e]>=3&&(t=!0),!l.length)break;nl(l.pop())}return t}function nl(l){var t=N,i=ol(t);if(function(l){A.push({move:l,kings:{b:q.b,w:q.w},turn:N,castling:{b:I.b,w:I.w},ep_square:M,half_moves:O,move_number:S})}(l),E[l.to]=E[l.from],E[l.from]=null,l.flags&m.EP_CAPTURE&&(N===n?E[l.to-16]=null:E[l.to+16]=null),l.flags&m.PROMOTION&&(E[l.to]={type:l.promotion,color:t}),E[l.to].type===c){if(q[E[l.to].color]=l.to,l.flags&m.KSIDE_CASTLE)E[l.to-1]=E[r=l.to+1],E[r]=null;else if(l.flags&m.QSIDE_CASTLE){var r;E[l.to+1]=E[r=l.to-2],E[r]=null}I[t]=""}if(I[t])for(var o=0,s=C[t].length;o<s;o++)if(l.from===C[t][o].square&&I[t]&C[t][o].flag){I[t]^=C[t][o].flag;break}if(I[i])for(o=0,s=C[i].length;o<s;o++)if(l.to===C[i][o].square&&I[i]&C[i][o].flag){I[i]^=C[i][o].flag;break}M=l.flags&m.BIG_PAWN?"b"===N?l.to-16:l.to+16:u,l.piece===e?O=0:l.flags&(m.CAPTURE|m.EP_CAPTURE)?O=0:O++,N===n&&S++,N=ol(N)}function tl(){var l=A.pop();if(null==l)return null;var t=l.move;q=l.kings,I=l.castling,M=l.ep_square,O=l.half_moves,S=l.move_number;var u,i,r=N=l.turn,o=ol(N);return E[t.from]=E[t.to],E[t.from].type=t.piece,E[t.to]=null,t.flags&m.CAPTURE?E[t.to]={type:t.captured,color:o}:t.flags&m.EP_CAPTURE&&(E[r===n?t.to-16:t.to+16]={type:e,color:o}),t.flags&(m.KSIDE_CASTLE|m.QSIDE_CASTLE)&&(t.flags&m.KSIDE_CASTLE?(u=t.to+1,i=t.to-1):t.flags&m.QSIDE_CASTLE&&(u=t.to-2,i=t.to+1),E[u]=E[i],E[i]=null),t}function ul(l,n){var t=G(l);if(n){var u=t.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/);if(u)var e=u[1],i=u[2],r=u[3],o=u[4]}for(var s=$(),c=0,a=s.length;c<a;c++){if(t===G(z(s[c]))||n&&t===G(z(s[c],!0)))return s[c];if(u&&(!e||e.toLowerCase()==s[c].piece)&&x[i]==s[c].from&&x[r]==s[c].to&&(!o||o.toLowerCase()==s[c].promotion))return s[c]}return null}function el(l){return l>>4}function il(l){return 15&l}function rl(l){var n=il(l),t=el(l);return"abcdefgh".substring(n,n+1)+"87654321".substring(t,t+1)}function ol(l){return l===t?n:t}function sl(l){var n=function l(n){var t=n instanceof Array?[]:{};for(var u in n)t[u]="object"==typeof u?l(n[u]):n[u];return t}(l);n.san=z(n,!1),n.to=rl(n.to),n.from=rl(n.from);var t="";for(var u in m)m[u]&n.flags&&(t+=v[u]);return n.flags=t,n}function cl(l){return l.replace(/^\s+|\s+$/g,"")}return Q(void 0===l?f:l),{WHITE:t,BLACK:n,PAWN:e,KNIGHT:i,BISHOP:r,ROOK:o,QUEEN:s,KING:c,SQUARES:function(){for(var l=[],n=x.a8;n<=x.h1;n++)136&n?n+=7:l.push(rl(n));return l}(),FLAGS:v,load:function(l){return Q(l)},reset:function(){return B()},moves:function(l){for(var n=$(l),t=[],u=0,e=n.length;u<e;u++)t.push(void 0!==l&&"verbose"in l&&l.verbose?sl(n[u]):z(n[u],!1));return t},in_check:function(){return W()},in_checkmate:function(){return X()},in_stalemate:function(){return Z()},in_draw:function(){return O>=100||Z()||V()||ll()},insufficient_material:function(){return V()},in_threefold_repetition:function(){return ll()},game_over:function(){return O>=100||X()||Z()||V()||ll()},validate_fen:function(l){return R(l)},fen:function(){return D()},pgn:function(l){var n="object"==typeof l&&"string"==typeof l.newline_char?l.newline_char:"\n",t="object"==typeof l&&"number"==typeof l.max_width?l.max_width:0,u=[],e=!1;for(var i in L)u.push("["+i+' "'+L[i]+'"]'+n),e=!0;e&&A.length&&u.push(n);for(var r=[];A.length>0;)r.push(tl());for(var o=[],s="";r.length>0;){var c=r.pop();A.length||"b"!==c.color?"w"===c.color&&(s.length&&o.push(s),s=S+"."):s=S+". ...",s=s+" "+z(c,!1),nl(c)}if(s.length&&o.push(s),void 0!==L.Result&&o.push(L.Result),0===t)return u.join("")+o.join(" ");var a=0;for(i=0;i<o.length;i++)a+o[i].length>t&&0!==i?(" "===u[u.length-1]&&u.pop(),u.push(n),a=0):0!==i&&(u.push(" "),a++),u.push(o[i]),a+=o[i].length;return u.join("")},load_pgn:function(l,n){var t=void 0!==n&&"sloppy"in n&&n.sloppy;function u(l){return l.replace(/\\/g,"\\")}var e="object"==typeof n&&"string"==typeof n.newline_char?n.newline_char:"\r?\n",i=new RegExp("^(\\[(.|"+u(e)+")*\\])("+u(e)+")*1.("+u(e)+"|.)*$","g"),r=l.replace(i,"$1");"["!==r[0]&&(r=""),B();var o=function(l,n){for(var t={},e=r.split(new RegExp(u("object"==typeof n&&"string"==typeof n.newline_char?n.newline_char:"\r?\n"))),i="",o="",s=0;s<e.length;s++)i=e[s].replace(/^\[([A-Z][A-Za-z]*)\s.*\]$/,"$1"),o=e[s].replace(/^\[[A-Za-z]+\s"(.*)"\]$/,"$1"),cl(i).length>0&&(t[i]=o);return t}(0,n);for(var s in o)J([s,o[s]]);if("1"===o.SetUp&&!("FEN"in o&&Q(o.FEN)))return!1;var c=l.replace(r,"").replace(new RegExp(u(e),"g")," ");c=c.replace(/(\{[^}]+\})+?/g,"");for(var a=/(\([^\(\)]+\))+?/g;a.test(c);)c=c.replace(a,"");var f=cl(c=(c=(c=c.replace(/\d+\.(\.\.)?/g,"")).replace(/\.\.\./g,"")).replace(/\$\d+/g,"")).split(new RegExp(/\s+/));f=f.join(",").replace(/,,+/g,",").split(",");for(var b="",p=0;p<f.length-1;p++){if(null==(b=ul(f[p],t)))return!1;nl(b)}if(h.indexOf(b=f[f.length-1])>-1)(function(l){for(var n in l)return!0;return!1})(L)&&void 0===L.Result&&J(["Result",b]);else{if(null==(b=ul(b,t)))return!1;nl(b)}return!0},header:function(){return J(arguments)},ascii:function(){return function(){for(var l="   +------------------------+\n",n=x.a8;n<=x.h1;n++){if(0===il(n)&&(l+=" "+"87654321"[el(n)]+" |"),null==E[n])l+=" . ";else{var u=E[n].type;l+=" "+(E[n].color===t?u.toUpperCase():u.toLowerCase())+" "}n+1&136&&(l+="|\n",n+=8)}return(l+="   +------------------------+\n")+"     a  b  c  d  e  f  g  h\n"}()},turn:function(){return N},move:function(l,n){var t=null;if("string"==typeof l)t=ul(l,void 0!==n&&"sloppy"in n&&n.sloppy);else if("object"==typeof l)for(var u=$(),e=0,i=u.length;e<i;e++)if(!(l.from!==rl(u[e].from)||l.to!==rl(u[e].to)||"promotion"in u[e]&&l.promotion!==u[e].promotion)){t=u[e];break}if(!t)return null;var r=sl(t);return nl(t),r},undo:function(){var l=tl();return l?sl(l):null},clear:function(){return T()},put:function(l,n){return U(l,n)},get:function(l){return K(l)},remove:function(l){return function(l){var n=K(l);return E[x[l]]=null,n&&n.type===c&&(q[n.color]=u),F(D()),n}(l)},perft:function(l){return function l(n){for(var t=$({legal:!1}),u=0,e=N,i=0,r=t.length;i<r;i++)nl(t[i]),H(e)||(n-1>0?u+=l(n-1):u++),tl();return u}(l)},square_color:function(l){if(l in x){var n=x[l];return(el(n)+il(n))%2==0?"light":"dark"}return null},history:function(l){for(var n=[],t=[],u=(void 0!==l&&"verbose"in l&&l.verbose);A.length>0;)n.push(tl());for(;n.length>0;){var e=n.pop();t.push(u?sl(e):z(e)),nl(e)}return t}}};n.Chess=e,void 0===(u=(function(){return e}).call(n,t,n,l))||(l.exports=u)}}]);